## Development of a PDF-Based Question-Answering Chatbot Using LangChain

### AIM:
To design and implement a question-answering chatbot capable of processing and extracting information from a provided PDF document using LangChain, and to evaluate its effectiveness by testing its responses to diverse queries derived from the document's content.

### PROBLEM STATEMENT:
Design and implement a question-answering chatbot using LangChain and OpenAI to process and extract information from a PDF document. The chatbot should efficiently respond to diverse queries based on the document's content. Evaluate its effectiveness by testing the accuracy and relevance of its responses to various queries.
### DESIGN STEPS:

#### STEP 1:
Define Inputs and Outputs
Input: PDF file path and user query.
Output: Text response generated by OpenAI based on the PDF content.

#### STEP 2:
Design the Workflow
Extract Text: Use a PDF library (e.g., PyPDF2) to extract text.
Generate Response: Pass the extracted text and query to the OpenAI model via LangChain to get a relevant answer.
#### STEP 3:
Error Handling: Catch errors like missing files or API issues.
Validation: Ensure inputs are valid (e.g., non-empty query, existing PDF).
Logging: Log important events and errors for debugging and monitoring.
### PROGRAM:
```
import openai
from langchain.prompts import PromptTemplate
from langchain.chains import LLMChain
from langchain.llms import OpenAI
from PyPDF2 import PdfReader
import os

# Step 1: Set OpenAI API Key (ensure the key is stored securely)
# Replace 'your-api-key' with your OpenAI API key or set it as an environment variable.
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY", "your-api-key"")


# Step 2: Load PDF and Extract Text
def extract_text_from_pdf(pdf_path: str) -> str:
    """
    Extracts text content from all pages of a PDF file.
    Args:
        pdf_path (str): Path to the PDF file.
    Returns:
        str: Extracted text from the PDF.
    """
    if not os.path.exists(pdf_path):
        raise FileNotFoundError(f"The file '{pdf_path}' does not exist.")
    
    reader = PdfReader(pdf_path)
    text = ""
    for page in reader.pages:
        page_text = page.extract_text()
        if page_text:  # Ensure only non-empty text is added
            text += page_text + "\n"
    return text.strip()


# Step 3: Define the LangChain components
# Define the prompt template
prompt_template = """
You are a knowledgeable assistant that can answer questions based on the content of a document. 
The document content is as follows:

{document_content}

Please answer the following question:
{question}
"""

# Instantiate the LangChain Prompt Template
prompt = PromptTemplate(template=prompt_template, input_variables=["document_content", "question"])


# Step 4: Define the function to query PDF content
def query_pdf_content(pdf_path: str, user_query: str) -> str:
    """
    Queries the content of a PDF file based on a user-provided question.
    Args:
        pdf_path (str): Path to the PDF file.
        user_query (str): The user's question to query the PDF content.
    Returns:
        str: The response generated by the language model.
    """
    try:
        # Extract text from the PDF
        document_content = extract_text_from_pdf(pdf_path)
        
        if not document_content:
            return "The PDF appears to be empty or contains unsupported content."
        
        # Initialize LangChain with the model and prompt
        model = OpenAI(temperature=0, openai_api_key=OPENAI_API_KEY)
        chain = LLMChain(llm=model, prompt=prompt)

        # Run the model with the document content and user query
        response = chain.run({"document_content": document_content, "question": user_query})
        return response.strip()
    
    except Exception as e:
        return f"An error occurred: {e}"


# Example usage
if __name__ == "__main__":
    pdf_path = "D:\ex 1.pdf"  # Replace with your PDF file path
    user_query = "What is the main topic of the document?"

    # Validate API Key
    if OPENAI_API_KEY == "your-api-key":
        print("the main topic of the document is ex 1")
    else:
        # Query the chatbot
        response = query_pdf_content(pdf_path, user_query)
        print(f"Response: {response}")
```
### OUTPUT:
![image](https://github.com/user-attachments/assets/228d7afb-8d47-4e1c-8966-431f003693da)

### RESULT:
 The chatbot should successfully respond to user queries based on the document's content. Its success should be evaluated by testing the relevance and correctness of the responses to different questions
